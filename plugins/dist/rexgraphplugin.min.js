!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.rexgraphplugin=e():t.rexgraphplugin=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=387)}({0:function(t,e){t.exports=function(t,e,n){if(t&&"number"!=typeof t){if(t.hasOwnProperty(e))return t[e];if(-1!==e.indexOf(".")){for(var r=e.split("."),o=t,i=n,s=0;s<r.length;s++){if(!o.hasOwnProperty(r[s])){i=n;break}i=o[r[s]],o=o[r[s]]}return i}return n}return n}},145:function(t,e,n){"use strict";var r=n(146),o=n.n(r);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,f(e).apply(this,arguments))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,o.a),n=e,(r=[{key:"shutdown",value:function(){this.removeAllListeners()}},{key:"destroy",value:function(){this.removeAllListeners()}}])&&s(n.prototype,r),i&&s(n,i),e}();e.a=a},146:function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,o="~";function i(){}function s(t,e,n,r,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new function(t,e,n){this.fn=t,this.context=e,this.once=n||!1}(n,r||t,i),u=o?o+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function u(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function f(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(o=!1)),f.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(o?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},f.prototype.listeners=function(t){var e=o?o+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,s=new Array(i);r<i;r++)s[r]=n[r].fn;return s},f.prototype.listenerCount=function(t){var e=o?o+t:t,n=this._events[e];return n?n.fn?1:n.length:0},f.prototype.emit=function(t,e,n,r,i,s){var u=o?o+t:t;if(!this._events[u])return!1;var f,c,a=this._events[u],l=arguments.length;if(a.fn){switch(a.once&&this.removeListener(t,a.fn,void 0,!0),l){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,e),!0;case 3:return a.fn.call(a.context,e,n),!0;case 4:return a.fn.call(a.context,e,n,r),!0;case 5:return a.fn.call(a.context,e,n,r,i),!0;case 6:return a.fn.call(a.context,e,n,r,i,s),!0}for(c=1,f=new Array(l-1);c<l;c++)f[c-1]=arguments[c];a.fn.apply(a.context,f)}else{var h,p=a.length;for(c=0;c<p;c++)switch(a[c].once&&this.removeListener(t,a[c].fn,void 0,!0),l){case 1:a[c].fn.call(a[c].context);break;case 2:a[c].fn.call(a[c].context,e);break;case 3:a[c].fn.call(a[c].context,e,n);break;case 4:a[c].fn.call(a[c].context,e,n,r);break;default:if(!f)for(h=1,f=new Array(l-1);h<l;h++)f[h-1]=arguments[h];a[c].fn.apply(a[c].context,f)}}return!0},f.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},f.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},f.prototype.removeListener=function(t,e,n,r){var i=o?o+t:t;if(!this._events[i])return this;if(!e)return u(this,i),this;var s=this._events[i];if(s.fn)s.fn!==e||r&&!s.once||n&&s.context!==n||u(this,i);else{for(var f=0,c=[],a=s.length;f<a;f++)(s[f].fn!==e||r&&!s[f].once||n&&s[f].context!==n)&&c.push(s[f]);c.length?this._events[i]=1===c.length?c[0]:c:u(this,i)}return this},f.prototype.removeAllListeners=function(t){var e;return t?(e=o?o+t:t,this._events[e]&&u(this,e)):(this._events=new i,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=o,f.EventEmitter=f,t.exports=f},147:function(t,e){t.exports=function(t,e,n,r){var o=t-n,i=e-r;return Math.sqrt(o*o+i*i)}},148:function(t,e,n){"use strict";var r=n(0),o=n.n(r);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.nextId=o()(e,"start",1),this.uidKey=o()(e,"uidKey","$uid"),this.autoRemove=o()(e,"remove",!0),this.refs={},this.count=0}var e,n,r;return e=t,(n=[{key:"add",value:function(t,e){var n=this.refs,r=this.uidKey;if(r&&null!=(e=t[r]))return this;if(null==e)do{e=this.nextId,this.nextId++}while(n.hasOwnProperty(e));return n.hasOwnProperty(e)?e=null:(n[e]=t,this.count++,r&&(t[r]=e),this.autoRemove&&t.on&&t.once("destroy",function(){this.remove(e)},this)),r?this:e}},{key:"addMultiple",value:function(t){for(var e=0,n=t.length;e<n;e++)this.add(t[e]);return this}},{key:"get",value:function(t){return this.refs[t]}},{key:"has",value:function(t){return this.refs.hasOwnProperty(t)}},{key:"remove",value:function(t){var e=this.refs;if(e.hasOwnProperty(t)){if(this.uidKey)e[t][this.uidKey]=void 0;delete e[t],this.count--}return this}},{key:"forEach",value:function(t,e){var n,r=this.refs;for(var o in r)n=r[o],e?t.call(e,n,o):t(n,o)}},{key:"clear",value:function(){this.forEach(function(t){this.remove(t)},this)}}])&&i(e.prototype,n),r&&i(e,r),t}();e.a=s},2:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=function(t){return null==t||""===t||0===t.length};e.a=function(t,e,n){if("object"===r(t))if(o(e)){if(null==n)return;"object"===r(n)&&(t=n)}else{"string"==typeof e&&(e=e.split("."));var i=e.pop();((function(t,e,n){void 0===n&&(n={});var i=t;if(o(e));else{var s;"string"==typeof e&&(e=e.split("."));for(var u=0,f=e.length;u<f;u++){var c;null!=i[s=e[u]]&&"object"===r(i[s])||(c=u===f-1?n:{},i[s]=c),i=i[s]}}return i})(t,e))[i]=n}}},387:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.r(e);var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scene=e}var e,n,o;return e=t,o=[{key:"register",value:function(e,n){t.prototype[e]=n}}],(n=null)&&r(e.prototype,n),o&&r(e,o),t}(),i=n(145),s=function(t,e){void 0===e&&(e=!1);var n=this.getObjUID(t);return e&&!this.edges.hasOwnProperty(n)&&(this.edges[n]={}),this.edges[n]},u=function(t){var e=this.getObjUID(t);return this.edges.hasOwnProperty(e)},f=new(n(148).a)({uidKey:"$uid",remove:!1});function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var l=f.uidKey,h=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.parent=e,f.add(this,n),this.graph=null,this.type=void 0,this.boot()}var e,n,r;return e=t,(n=[{key:"boot",value:function(){var t=c(this.parent);"number"!==t&&"string"!==t&&this.parent.once&&this.parent.once("destroy",this.destroy,this)}},{key:"destroy",value:function(){this.graph&&this.graph.remove(this[l]),f.remove(this[l]),this.parent=void 0,this.setGraph(null)}},{key:"setGraph",value:function(t){return this.graph=t,t||this.setType(void 0),this}},{key:"setType",value:function(t){return"string"==typeof t&&(t=p[t]),this.type=t,this}},{key:"isVertex",get:function(){return!!this.graph&&0===this.type}},{key:"isEdge",get:function(){return!!this.graph&&1===this.type}}])&&a(e.prototype,n),r&&a(e,r),t}();Object.assign(h.prototype,{});var p={vertex:0,edge:1},y=h;function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var b=function(t){var e=v(t);return"number"===e||"string"===e},d=function(t){return b(t)?f.get(t):(t.hasOwnProperty("rexGraphItem")||(t.rexGraphItem=new y(t)),t.rexGraphItem)},g={"->":1,"<-":2,"<->":3},m=function(t,e,n,r){if(this.isEdge(t))return this;void 0===r&&(r=3);var o=this.getObjUID(t),i=this.getEdgeData(o,!0);i.dir=r,i.vA=this.getObjUID(e),i.vB=this.getObjUID(n),d(t).setGraph(this),this.edgeCount++,this.addVertex(e).addVertex(n);var s=this.getVertexData(e,!0),u=this.getVertexData(n,!0);return"string"==typeof r&&(r=g(r)),1&r&&(s[o]=i.vB),2&r&&(u[o]=i.vA),this},O=function(t,e){if(this.isEdge(t))return this;void 0===e&&(e=!1);var n=this.getObjUID(t);return delete this.edges[n],this.edgeCount--,d(t).setGraph(null),e&&t.destroy&&gameObject.destroy(),this},w=function(t){return null==t?null:f.get(t).parent},x=function(t){var e;for(var n in void 0===t&&(t=[]),this.edges)(e=w(n))&&t.push(e);return t},j=function(t,e){void 0===e&&(e=[]);var n,r=this.getVertexData(t);if(!r)return e;for(var o in r)(n=w(o))&&e.push(n);return e},_=n(147),P=n.n(_),S={"breadth-first":0,bfs:0,"depth-first":1,dfs:1},V={getEdgeData:s,isEdge:u,addEdge:m,removeEdge:O,getAllEdges:x,getEdgesOfVertex:j,getEdgeLength:function(t){var e=this.getEdgeData(t);if(!e)return 0;var n=w(e.vA),r=w(e.vB);return n&&r?P()(n.x,n.y,r.x,r.y):0},isInLoop:function(t){if(!this.isVertex(t))return!1;for(var e,n,r,o,i,s=this.getObjUID(t),u=[[s,null]],f={};u.length>0;){if(n=(e=u.pop())[0],r=e[1],n===s&&null!==r)return!0;for(r in null!==r&&(f[r]=!0),o=this.getVertexData(n))f.hasOwnProperty(r)||(i=o[r],u.push([i,r]))}return!1},getVertexData:function(t,e){void 0===e&&(e=!1);var n=this.getObjUID(t);return e&&!this.vertices.hasOwnProperty(n)&&(this.vertices[n]={}),this.vertices[n]},isVertex:function(t){var e=this.getObjUID(t);return this.vertices.hasOwnProperty(e)},addVertex:function(t){return this.isVertex(t)?this:(this.getVertexData(t,!0),d(t).setGraph(this),this.vertexCount++,this)},addVertices:function(t){for(var e=0,n=t.length;e<n;e++)this.addVertex(t[e]);return this},removeVertex:function(t,e,n){if(!this.isVertex(t))return this;void 0===e&&(e=!1),void 0===n&&(n=!0);var r=this.getObjUID(t);if(n){var o=this.getVertexData(r);for(var i in o)this.removeEdge(i,e)}return delete this.vertices[r],this.vertexCount--,d(t).setGraph(null),e&&t.destroy&&gameObject.destroy(),this},removeAllVertices:function(t){for(var e in this.vertices)this.removeVertex(e,t);return this},getAllVertices:function(t){var e;for(var n in void 0===t&&(t=[]),this.vertices)(e=w(n))&&t.push(e);return t},getVerticesOfEdge:function(t,e){void 0===e&&(e=[]);var n,r=this.getEdgeData(t);return r?((n=w(r.vA))&&e.push(n),(n=w(r.vB))&&e.push(n),e):e},getOppositeVertex:function(t,e){var n=this.getVertexData(t);if(n){var r=this.getObjUID(e);if(r)return w(n[r])}},getAllConnectedVertices:function(t,e,n){if(void 0===e&&(e=[]),"string"==typeof n&&(n=S[n]),void 0===n&&(n=0),!this.isVertex(t))return e;for(var r,o,i=this.getObjUID(t),s=0===n,u=[i],f={};u.length>0;)if(r=s?u.shift():u.pop(),!f.hasOwnProperty(r))for(var c in f[r]=!0,r!==i&&e.push(w(r)),this.getVertexData(r))o=this.getOppositeVertex(r,c),f.hasOwnProperty(o)||u.push(o);return e},getNeighborVertices:function(t,e){void 0===e&&(e=[]);var n,r=this.getVertexData(t);if(r)for(var o in r)(n=w(r[o]))&&e.push(n);return e},areNeighborVertices:function(t,e){var n=this.getObjUID(t),r=this.getObjUID(e);if(null!=n&&null!=r){var o=this.getVertexData(t);for(var i in r=parseInt(r),o)if(o[i]===r)return!0}return!1}},E=f.uidKey,k=function(t){return b(t)?t:d(t)[E]};function D(t){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function C(t,e){return!e||"object"!==D(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function A(t,e,n){return(A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=T(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function U(t,e){return(U=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var G=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=C(this,T(e).call(this))).scene=t,n.vertices={},n.edges={},n.vertexCount=0,n.edgeCount=0,n.boot(),n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&U(t,e)}(e,i["a"]),n=e,(r=[{key:"boot",value:function(){this.scene&&this.scene.events.once("shutdown",this.destroy,this)}},{key:"shutdown",value:function(){return this.clear(),A(T(e.prototype),"shutdown",this).call(this),this.scene=void 0,this.vertices=void 0,this.edges=void 0,this.vertexCount=0,this.edgeCount=0,this}},{key:"destroy",value:function(){return this.emit("destroy"),this.shutdown(),this}},{key:"exists",value:function(t){return this.isEdge(t)||this.isVertex(t)}},{key:"remove",value:function(t){return this.isEdge(t)?this.removeEdge(t):this.isVertex(t)&&this.removeVertex(t),this}},{key:"clear",value:function(t){return void 0===t&&(t=!0),this.removeAllVertices(t),this}},{key:"getObjUID",value:function(t){return k(t)}}])&&I(n.prototype,r),o&&I(n,o),e}();Object.assign(G.prototype,V);var L=G,R=n(2);o.register("graph",function(t){return new L(this.scene,t)}),Object(R.a)(window,"RexPlugins.Graph.Graph",L);function K(t){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t,e){return!e||"object"!==K(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function B(t){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function N(t,e){return(N=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=M(this,B(e).call(this,t,n))).add=new o(t),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&N(t,e)}(e,Phaser.Plugins.ScenePlugin),e}();e.default=$}}).default});